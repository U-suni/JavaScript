<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax 연습</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</head>

<body>

    <div class="container">
        <div class="row">

            <!-- <div class="col-sm-4">
                <img src="https://via.placeholder.com/600" class="w-100">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
            </div> -->
        </div>
    </div>



    <div class="container" id="more">
        <button class="btn btn-danger">더보기</button>
    </div>

    <div class="container my-3" id="price">
        <button class="btn btn-danger">가격순정렬</button>
    </div>


    <div class="container my-3" id="name">
        <button class="btn btn-danger">다-나-가정렬</button>
    </div>

    <div class="container my-3" id="money">
        <button class="btn btn-danger">6만원이하</button>
    </div>

    <script>





        const products = [
            { id: 0, price: 70000, title: 'Blossom Dress' },
            { id: 1, price: 50000, title: 'Springfield Shirt' },
            { id: 2, price: 60000, title: 'Black Monastery' }
        ];



        products.forEach((a, i) => {
            console.log(a);
            const box = `
                    <div class="col-sm-4">
                      <img src="https://via.placeholder.com/600" class="w-100">
                      <h5>${products[i].title}</h5>
                      <p>가격 : ${products[i].price}</p>
                      <button class='buy'>구매</button>
                    </div>`
            document.querySelector('.row').insertAdjacentHTML('beforeend', box);
        })

        document.querySelectorAll('.buy').forEach(button => {
            button.addEventListener('click', function (e) {
                // <h5> 요소의 텍스트를 가져옴
                const title = e.target.parentElement.querySelector('h5').textContent;

                // localStorage에 'cart'가 이미 있는지 확인
                if (localStorage.getItem('cart') !== null) {
                    // 기존에 저장된 'cart'를 파싱하여 가져옴
                    const outItem = JSON.parse(localStorage.getItem('cart'));
                    // 새로운 title을 'cart' 배열에 추가
                    outItem.push(title);
                    // 업데이트된 'cart'를 다시 localStorage에 저장
                    localStorage.setItem('cart', JSON.stringify(outItem));
                } else {
                    // 'cart'가 존재하지 않으면 새로운 배열을 만들어 저장
                    localStorage.setItem('cart', JSON.stringify([title]));
                }
            });
        });



        // 로컬스토리지 개념
        // localStorage.setItem('이름', 'kim')
        // localStorage.getItem('이름');


        // var arr = [1, 2, 3];
        // var newArr = JSON.stringify(arr);

        // localStorage.setItem('num', newArr);
        // var Exam = localStorage.getItem('num');
        // var parsedExam = JSON.parse(Exam);
        // console.log(parsedExam[0]);



        document.querySelector('#more').addEventListener('click', () => {

            // count += 1;
            // console.log(count);
            // if (count == 1) {
            //     fetch('https://codingapple1.github.io/js/more1.json')
            //         .then(res => res.json())
            //         .then(function (data) {
            //             data.forEach((list, i) => {
            //                 const box = `
            //              <div class="col-sm-4">
            //                 <img src="https://via.placeholder.com/600" class="w-100">
            //                 <h5>${data[i].title}</h5>
            //                 <p>가격 : ${data[i].price}</p>
            //              </div>`
            //                 document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //             })
            //         }).catch(function (error) {
            //             console.log('시류페');
            //         })
            // } else if (count == 2) {
            //     fetch('https://codingapple1.github.io/js/more2.json')
            //         .then(res => res.json())
            //         .then(function (data) {
            //             data.forEach((list, i) => {
            //                 const box = `
            //              <div class="col-sm-4">
            //                 <img src="https://via.placeholder.com/600" class="w-100">
            //                 <h5>${data[i].title}</h5>
            //                 <p>가격 : ${data[i].price}</p>
            //              </div>`
            //                 document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //             })
            //         }).catch(function (error) {
            //             console.log('시류페');
            //         })
            // }


            // document.querySelector('#price').addEventListener('click', function () {
            //     document.querySelector('.row').innerHTML = '';

            //     products.sort(function (a, b) {
            //         return a.price - b.price
            //     });
            //     products.forEach((a, i) => {
            //         console.log(a);
            //         const box = `
            //         <div class="col-sm-4">
            //           <img src="https://via.placeholder.com/600" class="w-100">
            //           <h5>${products[i].title}</h5>
            //           <p>가격 : ${products[i].price}</p>
            //         </div>`
            //         document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //     })
            //     console.log(products);
            // })


            // document.querySelector('#name').addEventListener('click', function () {
            //     document.querySelector('.row').innerHTML = '';
            //     const newProducts = products.sort((a, b) => b.title.localeCompare(a.title));
            //     products.forEach((a, i) => {
            //         console.log(a);
            //         const box = `
            //         <div class="col-sm-4">
            //           <img src="https://via.placeholder.com/600" class="w-100">
            //           <h5>${products[i].title}</h5>
            //           <p>가격 : ${products[i].price}</p>
            //         </div>`
            //         document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //     })
            //     console.log(products);
            // })

            // document.querySelector('#money').addEventListener('click', function () {
            //     document.querySelector('.row').innerHTML = '';
            //     const priceProducts = products.filter(function (a) {
            //         return a.price <= 60000;
            //     });
            //     priceProducts.forEach((a, i) => {
            //         console.log(a);
            //         const box = `
            //             <div class="col-sm-4">
            //               <img src="https://via.placeholder.com/600" class="w-100">
            //               <h5>${a.title}</h5>
            //               <p>가격 : ${a.price}</p>
            //             </div>`;
            //         document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //     });
            // });


            // document.querySelector('#money').addEventListener('click', function(){
            //     document.querySelector('.row').innerHTML = '';
            //     const priceProducts = products.filter(function(){
            //         return a.price <= 60000

            //     });
            //     priceProducts.forEach((a, i) => {
            //         console.log(a);
            //         const box = `
            //         <div class="col-sm-4">
            //           <img src="https://via.placeholder.com/600" class="w-100">
            //           <h5>${priceProducts[i].title}</h5>
            //           <p>가격 : ${priceProducts[i].price}</p>
            //         </div>`
            //         document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //     });
            // })



            // fetch('https://codingapple1.github.io/js/more1.json')
            //     .then(res => res.json())
            //     .then(function(data){
            //     data.forEach((list, i)=>{
            //         const box = `
            //              <div class="col-sm-4">
            //                 <img src="https://via.placeholder.com/600" class="w-100">
            //                 <h5>${data[i].title}</h5>
            //                 <p>가격 : ${data[i].price}</p>
            //              </div>`
            //         document.querySelector('.row').insertAdjacentHTML('beforeend', box);
            //     })
            // }).catch(function(error){
            //     console.log('시류페');
            // })
        })
    </script>


    <!-- 부트스트랩 -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
</body>

</html>